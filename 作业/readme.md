# 作业json格式和作战实现思路
纯图色的作战实现方式,通过不断ocr顶部的[消灭敌人数/敌人总数]和右下角[cost数字]确定干员的摆放和技能等操作  

单线程下每次都检测是否满足下一条"部署"或"波数依赖"的指令,感觉用两个线程分别监视会比较好  

```vb
获得待部署干员列表
	检测下方的小c图标获得[干员位置]和[所需cost]
	点一下[干员位置]ocr[干员名字]	
```
开始战斗和每次部署撤退干员后都会调用一次 `获得待部署干员列表`  

__Q:__ 为啥要每次都获取呢,只获取一次,然后可以根据撤退和部署的操作计算干员位置和后续需要的cost啊,还省时间  

__A:__ 1.因为有些干员部署上去后会产生召唤物,我懒得研究yj的干员顺序了  
  2.有些复数个的待部署物比如地雷啊箱子啊召唤物啊,放下去可能列表不会变,还需要检测部署物的数量,而且也不是总是-1-1,有的部署物会增加,啊按键精灵弄ocr实在太麻烦了,不想弄了  
  3.虽然看上去很蠢,但是不需要很多的固定表,就这样吧  
  
__Q:__ 那可以通过识图得到干员列表啊,不用点开干员ocr,你这看上去一点也不优雅  

__A:__ qs,但是需要的素材有点多,除了各种干员精一,精二,皮肤的头像还要召唤物的普通,皮肤头像orz,想想就肝疼,不过应该可以通过wiki拿到,期待其他大佬改善  
  
## 例:大骑士领酒吧街作业
[作业效果视频](https://www.bilibili.com/video/BV12u411X7VS/)
[南方监狱的演示视频](https://www.bilibili.com/video/BV1sL411F7K3)
```jsonc
{						       
							

	"关卡名":"连绵战火",                             //地图名字,泰迪提供(其实横纵坐标一样应该能通用,比如我这里...这样就不用着急随着游戏更新了)

	"需要慢放干员": false,                           //开始时点最右下角,以1/5倍速下放置干员
						        //写死成前2个干员了,应该加个参数让设置

	"开始行动样式":1,                                //开始行动的样式 
							//   1:普通图 2:突袭和普通图 3:肉鸽 4:联锁行动

	"剿灭":0,                                       //是否是剿灭,关系到顶部[消灭敌人数/敌人总数]的判断位置 
							//   0:不是 1:是 

	"加速波数":2,                                    //消灭第几个敌人后开启2倍速

	"需要干员": {                                    //可选,肉鸽和悖论模拟不需要
						        //根据需要的干员依分类选择,这里应该不用用户分类
						        //应该不用用户分类往里面填,但是不想做干员类别的字典了

		"先锋": ["推进之王2","桃金娘1"],		 //"干员名+使用x技能",应该分开,但是懒得再写一级了
						         //肉鸽模式下如果这里内容非空,会再根据这里的内容重新设置一遍特定干员的技能
		"狙击": [],
		"医疗": ["闪灵2","夜莺2"],
		"术师": [],
		"近卫": ["山2","史尔特尔3"],
		"重装": ["泥岩2","塞雷娅1","星熊2"],
		"辅助": ["浊心斯卡蒂2"],
		"特种": []
	},

	"部署": [                                        //有序,指和时机没关系的,有费就下的干员,一直到第一个时机相关的 部署/撤退操作
						         //一条一条往下执行,如果没有检测到需要的干员,执行下一行指令
						         //持续检测右下角cost数字到>=该干员所需费用,执行部署操作

		["桃金娘", 9, 2, "上"],                   //[干员名,格子横坐标,格子纵坐标,朝向,(部署后延时,可选,开视野在单倍速下要7s)]
						         //不同干员部署在同一位置时会滑动,但是不会部署下去
						         //相同干员可以有两条指令,以满足地图变化(比如驯兽小屋的源石坛子有两种坐标)
		["推进之王", 8, 2, "左",7000],		
		["浊心斯卡蒂", 7, 2, "上",7000],		
		["山", 7, 4, "上"],		
		["夜莺", 8, 3, "左"],		
		["闪灵", 9, 3, "左"],		
		["泥岩", 6, 3, "左"],		
		["塞雷娅", 6, 2, "下"],		
		["星熊", 7, 3, "下"],		
		["史尔特尔", 7, 3, "下"]
		
	],

	"波数依赖": [                                      //有序,跟时机有关的操作,以顶部[消灭敌人数/敌人总数]的数字判断当前的时机,不是很准
						          //主要就三种操作:放技能 部署干员 撤退干员

		[0, "技能", 9,2],                         //一条一条往下执行,如果超过一定时间(我写死了)没有执行,执行下一行指令
						          //释放技能:两种指令
							  //  1:[消灭敌人数,"技能",横坐标,纵坐标]
							  //  根据时机释放对应格子的技能,操作为点击对应格子,看是否有ready,推荐
							  //  2:[消灭敌人数,"技能","干员名字"]
							  //  根据时机释放指定干员的技能,操作为找到屏幕上的技能就绪小标,
							  //  点击下方的干员,ocr名字如为指定的干员,放技能.适用于不确定干员的部署位置
		[1, "技能", 7,4],
		[1, "技能", 9,2],
		[4, "技能", 9,2],
		[9, "技能", 9,2],
		[43, "撤退",8,2],                         //撤退干员:[消灭敌人数,"撤退",横坐标,纵坐标]
		[43, "部署","史尔特尔",5,3,"下"],          //部署干员:[消灭敌人数,"部署",[部署指令]]
		[43, "技能",5,3]
	]
                                                         //应该再加一个跟时机无关的有就放的技能字段,比如桃金娘和棘刺的,但是懒得弄了
}
```
